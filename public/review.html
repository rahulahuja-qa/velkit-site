<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Resume Review Â· Velkit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>html{font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}</style>
</head>
<body class="antialiased">
  <header class="border-b">
    <div class="mx-auto max-w-5xl px-4 py-4 flex items-center gap-3">
      <a href="/" class="flex items-center gap-3">
        <img src="/velkit-logo.png" alt="Velkit" class="h-10 w-auto"/><span class="text-xl font-semibold">Velkit</span>
      </a>
      <a href="mailto:hello@velkit.io" class="ml-auto inline-flex items-center rounded-xl bg-black px-4 py-2 text-white">Contact</a>
    </div>
  </header>

  <main class="mx-auto max-w-5xl p-8 space-y-6">
    <h1 class="text-3xl font-bold">Resume Review</h1>

    <form id="f" class="rounded-2xl border p-6 grid gap-4">
      <input type="file" name="resume" accept=".pdf,.docx,.txt" class="border rounded-lg p-3" required/>
      <textarea name="job_description" class="border rounded-lg p-3 min-h-40" placeholder="Paste job description" required></textarea>
      <button class="rounded-2xl bg-black text-white px-5 py-3">Review</button>
    </form>

    <section id="out" class="grid gap-4 hidden">
      <div class="rounded-2xl border p-6"><h2 class="text-lg font-semibold">ATS Score</h2><p id="score" class="text-2xl mt-1"></p></div>
      <div class="rounded-2xl border p-6"><h2 class="text-lg font-semibold">Missing Keywords</h2><ul id="kw" class="list-disc pl-6 mt-2"></ul></div>
      <div class="rounded-2xl border p-6"><h2 class="text-lg font-semibold">Rewrite Suggestions</h2><ul id="rw" class="list-disc pl-6 mt-2"></ul></div>
    </section>
  </main>

  <script>
    document.getElementById("f").addEventListener("submit", async (e) => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const r = await fetch("/api/review", { method:"POST", body: fd });
      const j = await r.json();
      document.getElementById("out").classList.remove("hidden");
      document.getElementById("score").textContent = j.ats_score ?? "-";
      document.getElementById("kw").innerHTML = (j.missing_keywords||[]).map(k=>`<li>${k}</li>`).join("");
      document.getElementById("rw").innerHTML = (j.rewrite_suggestions||[]).map(s=>`<li>${s}</li>`).join("");
    });
  </script>
</body>
</html>
