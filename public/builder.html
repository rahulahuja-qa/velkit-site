<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Resume & Cover Letter Builder Â· Velkit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>html{font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}</style>
</head>
<body class="antialiased">
  <header class="border-b">
    <div class="mx-auto max-w-5xl px-4 py-4 flex items-center gap-3">
      <a href="/" class="flex items-center gap-3">
        <img src="/velkit-logo.png" alt="Velkit" class="h-10 w-auto"/><span class="text-xl font-semibold">Velkit</span>
      </a>
      <a href="mailto:hello@velkit.io" class="ml-auto inline-flex items-center rounded-xl bg-black px-4 py-2 text-white">Contact</a>
    </div>
  </header>

  <main class="mx-auto max-w-5xl p-8 space-y-6">
    <h1 class="text-3xl font-bold">Resume &amp; Cover Letter Builder</h1>
    <form id="f" class="rounded-2xl border p-6 grid gap-4">
      <input name="name" class="border rounded-lg p-3" placeholder="Your name" required/>
      <input name="contact" class="border rounded-lg p-3" placeholder="Contact (email/phone/location)" required/>
      <input name="role" class="border rounded-lg p-3" placeholder="Target role" required/>
      <input name="years_exp" type="number" min="0" class="border rounded-lg p-3" placeholder="Years of experience"/>
      <input name="skills" class="border rounded-lg p-3" placeholder="Key skills (comma-separated)"/>
      <textarea name="job_description" class="border rounded-lg p-3 min-h-40" placeholder="Paste job description" required></textarea>
      <button class="rounded-2xl bg-black text-white px-5 py-3">Generate</button>
    </form>

    <section id="out" class="grid gap-4 sm:grid-cols-2 hidden">
      <div class="rounded-2xl border p-6">
        <h2 class="text-lg font-semibold">Cover Letter</h2>
        <pre id="cl" class="whitespace-pre-wrap text-sm mt-2"></pre>
      </div>
      <div class="rounded-2xl border p-6">
        <h2 class="text-lg font-semibold">Resume</h2>
        <pre id="cv" class="whitespace-pre-wrap text-sm mt-2"></pre>
      </div>
    </section>
  </main>

  <script>
    document.getElementById("f").addEventListener("submit", async (e) => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const body = {
        name: String(fd.get("name")||""),
        contact: String(fd.get("contact")||""),
        role: String(fd.get("role")||""),
        years_exp: Number(fd.get("years_exp")||0),
        skills: String(fd.get("skills")||"").split(",").map(s=>s.trim()).filter(Boolean),
        job_description: String(fd.get("job_description")||"")
      };
      const r = await fetch("/api/builder", {
        method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify(body)
      });
      const j = await r.json();
      document.getElementById("out").classList.remove("hidden");
      document.getElementById("cl").textContent = j.cover_letter || JSON.stringify(j,null,2);
      document.getElementById("cv").textContent = JSON.stringify(j.resume || j, null, 2);
    });
  </script>
</body>
</html>
