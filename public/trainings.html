<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Trainings & Certifications · Velkit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>html{font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}</style>
</head>
<body class="antialiased">
  <header class="border-b">
    <div class="mx-auto max-w-5xl px-4 py-4 flex items-center gap-3">
      <a href="/" class="flex items-center gap-3">
        <img src="/velkit-logo.png" alt="Velkit" class="h-10 w-auto"/>
      </a>
      <a href="mailto:hello@velkit.io" class="ml-auto inline-flex items-center rounded-xl bg-black px-4 py-2 text-white">Contact</a>
    </div>
  </header>

  <main class="mx-auto max-w-5xl p-8 space-y-6">
    <h1 class="text-3xl font-bold">Trainings &amp; Certifications</h1>

    <form id="f" class="rounded-2xl border p-6 grid gap-4 sm:grid-cols-2">
      <input name="target_role" class="border rounded-lg p-3 sm:col-span-2" placeholder="Target role" required/>
      <input name="current_skills" class="border rounded-lg p-3" placeholder="Current skills (comma-separated)"/>
      <input name="interests" class="border rounded-lg p-3" placeholder="Interests (comma-separated)"/>
      <div class="sm:col-span-2">
        <button class="rounded-2xl bg-black text-white px-5 py-3">Recommend</button>
      </div>
    </form>

    <div id="plan" class="grid gap-4"></div>
  </main>

  <script>
    document.getElementById("f").addEventListener("submit", async (e) => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const body = {
        target_role: String(fd.get("target_role")||""),
        current_skills: String(fd.get("current_skills")||"").split(",").map(s=>s.trim()).filter(Boolean),
        interests: String(fd.get("interests")||"").split(",").map(s=>s.trim()).filter(Boolean)
      };
      const r = await fetch("/api/trainings", {
        method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify(body)
      });
      const j = await r.json();
      const el = document.getElementById("plan");
      el.innerHTML = (j.plan||[]).map(p=>`
        <div class="rounded-2xl border p-6">
          <div class="font-semibold">${p.title}</div>
          <div class="text-sm text-gray-600">${p.provider} • ${p.level} • ~${p.estimated_hours}h</div>
          <p class="mt-2 text-sm">${p.why}</p>
        </div>`).join("");
    });
  </script>
</body>
</html>
